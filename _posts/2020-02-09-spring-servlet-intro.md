---
layout: post 
title: "서블릿(Servlet) 소개"
date: 2020-02-09
excerpt: "백기선 강의 - 스프링 웹 MVC"
tags: 
- Spring
- 백기선 강의
- 스프링 웹 MVC
comments: true 
---

>백기선님의 스프링 웹 MVC 강의 내용을 정리한 내용입니다.
---

 # 서블릿 소개

**서블릿 (Servlet)**

1. 자바 엔터프라이즈 에디션은 웹 애플리케이션 개발용 스팩과 API을 제공한다. 그 중 가장 중요한 클래스중 하나가 HttpServlet이다.
2. 프로세스를 생성하는 것이 아닌 요청 당 프로세스 내의 쓰레드 (만들거나, 풀에서 가져다가) 사용한다.



서블릿 등장 이전에 사용하던 기술 CGI(Common Gateway Interface)는 요청 당 프로세스를 만들어 사용했다.

CGI와 비교하여 서블릿이 갖는 장점은 다음과 같다.

1. 요청 당 쓰레드를 만들어 사용하므로 **빠르다.**
2. Java 기반이기 때문에 **OS 플랫폼 독립적이다.**
3. Java가 지원하는 보안과 관련된 기능을 지원받아 **보안성이 좋다.**
4. 플랫폼 독립성과 비슷한 맥락에서 **이식성이 좋다.**



서블릿 엔진 또는 서블릿 컨테이너라고 불리는 서블릿 스팩을 구현하여 서블릿을 어떻게 초기화하고, 실행 그리고 사용하는지 라이플 사이클을 관리할 수 있는 톰캣, 제티, 언더토 등이 해주는 기능들이 많다.

1. 세션 관리
2. 네트워크 서비스
3. MIME 기반 메세지 인코딩/디코딩
4. 서블릿 생명주기 관리



서블릿 애플리케이션은 우리가 직접 실행할 수 없다. 서블릿 애플리케이션은 서블릿 컨테이너가 실행할 수 있기 때문에 반드시 서블릿 컨테이너를 사용해야 한다.

서블릿의 생명주기(서블릿 컨테이너가 서블릿을 실행하는 방법)은 다음과 같다.

1. 최초 요청을 서블릿 컨테이너가 받았고 요청을 처리할 서블릿을 찾았다면 서블릿을 instance를 만들고 init을 최초로 호출한다.
   * 최초 요청을 받았을 때 한번 초기화하고 나면 그 다음 요청부터는 이 과정을 생략한다.
2. 서블릿이 초기화 된 다음부터 클라이언트의 요청을 처리할 수 있다. 각 요청은 별도의 쓰레드로 처리하고 이때 서블릿 인스턴스의 service() 메소드를 호출한다.
   * 이 안에서 HTTP 요청을 받고 클라이언트로 보낼 HTTP 응답을 만든다.
   * service()는 보통 HTTP Method에 따라 doGet(), doPost() 등으로 처리를 위임한다. 따라서 보통 doGet() 또는 doPost()를 구현한다.
3. 또 다른 요청이 들어오는 경우 서블릿이 메모리에 올라가 있어 init이라는 method를 호출하지 않고 doGet(do Post 등) Method만 호출하여 작업을 진행한다.
   * 초기화 작업이 많은 경우에는 요청을 처리하는 시간을 줄이고자 Warm-up을 한다. 초기에 모든 서블릿이 로딩이 되게끔 요청을 한다.
4. 서블릿 컨테이너 판단에 따라 서블릿을 더 이상 메모리에 올려둘 필요가 없는 경우 destory()를 호출한다. 특히, 서블릿 컨테이너가 종료할 때 반드시 destory()를 호출하도록 되어있다.

